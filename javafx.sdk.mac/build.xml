<?xml version="1.0" encoding="UTF-8"?>
<!-- You may freely edit this file. See harness/README in the NetBeans platform -->
<!-- for some information on what you could do (e.g. targets to override). -->
<!-- If you delete this file and reopen the project it will be recreated. -->
<project name="org.netbeans.modules.javafx.sdk.mac" default="netbeans" basedir=".">
    <description>Builds, tests, and runs the project org.netbeans.modules.javafx.sdk.mac.</description>
    <import file="nbproject/build-impl.xml"/>

    <condition property="isMacOSX">
      <or>
        <isfalse value="${onlycurrplat}"/>
        <os family="mac"/>
      </or>
    </condition>
 
    <target name="delete-release-external" depends="basic-init">
      <delete dir="release" quiet="true"/>
    </target>    

    <target name="init-release-external" depends="basic-init,delete-release-external" if="isMacOSX">
      <property name="build.config" value="promoted"/>
      <property file="../build-${build.config}.properties"/>
      <mkdir dir="external"/>
      <property name="offline" value="false"/>
  		<get src="${javafx-sdk.mac.url}" dest="external/javafx_sdk-macosx.zip" usetimestamp="true" verbose="true" ignoreerrors="${offline}"/>
      <unzip src="external/javafx_sdk-macosx.zip" dest="release/javafx-sdk">
        <regexpmapper from="^(javafx-sdk[^/]*/)?(.*)$" to="\2"/>
      </unzip>
    </target>

    <target name="release" depends="files-init" if="has.release.dir">
        <mkdir dir="${cluster}"/>
        <copy todir="${cluster}" overwrite="true">
            <fileset dir="${release.dir}">
                <patternset includes="${release.files}"/>
            </fileset>
        </copy>        
    </target>

    <target name="init" depends="init-release-external,harness.init"/>

</project>
