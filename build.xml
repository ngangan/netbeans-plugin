<?xml version="1.0" encoding="UTF-8"?>
<!-- You may freely edit this file. See harness/README in the NetBeans platform -->
<!-- for some information on what you could do (e.g. targets to override). -->
<!-- If you delete this file and reopen the project it will be recreated. -->
<project name="javafx" basedir="." default="build">
    <description>Builds the module suite javafx.</description>
    <import file="nbproject/build-impl.xml"/>
    

    <target name="files-init" depends="-release.files">
        <property name="release.files" value=""/>
        <property name="build.config" value="daily"/>
        <property file="build-${build.config}.properties"/>
        <property environment="env"/>
        <condition property="catalog.base.url" value="${env.HUDSON_URL}job/${env.JOB_NAME}/${env.BUILD_NUMBER}/artifact/build/updates">
            <isset property="env.HUDSON_URL"/>
        </condition>
        
        <delete dir="build"/>
        <mkdir dir="build"/>
        <mkdir dir="installer.new/external"/>
        <property name="use.timestamp" value="true"/>
        <parallel failonany="true">
            <sequential>
                <get src="${netbeans.binaries.url}" dest="netbeans.zip" usetimestamp="${use.timestamp}" verbose="true"/>
                <unzip src="netbeans.zip" dest="build"/>
            </sequential>
            <sequential>
                <mkdir dir="javafx.sdk.win/external"/>
                <get src="${javafx-sdk.win.url}" dest="javafx.sdk.win/external/javafx_sdk-windows.zip" usetimestamp="${use.timestamp}" verbose="true"/>
            </sequential>   
            <sequential>
                <mkdir dir="javafx.sdk.mac/external"/>
                <get src="${javafx-sdk.mac.url}" dest="javafx.sdk.mac/external/javafx_sdk-macosx.zip" usetimestamp="${use.timestamp}" verbose="true"/>
            </sequential>   
            <sequential>
                <mkdir dir="javafx.sdk.lin/external"/>
                <get src="${javafx-sdk.lin.url}" dest="javafx.sdk.lin/external/javafx_sdk-linux.zip" usetimestamp="${use.timestamp}" verbose="true"/>
            </sequential>   
<!--
            <sequential>
                <mkdir dir="javafx.sdk.sol/external"/>
                <get src="${javafx-sdk.sol.url}" dest="javafx.sdk.sol/external/javafx_sdk-solaris.zip"/>
            </sequential>
-->               
            <sequential>
                <get src="${netbeans.windows.installer.url}" dest="installer.new/external/netbeans-javase-windows.exe" usetimestamp="true" verbose="true"/>
            </sequential>   
            <sequential>
                <get src="${netbeans.linux.installer.url}" dest="installer.new/external/netbeans-javase-linux.sh" usetimestamp="true" verbose="true"/>
            </sequential>   
        </parallel>    
    </target>
    
    <target name="clean" depends="-init,testuserdir-delete" description="Clean everything.">
        <mkdir dir="build/netbeans"/>
        <subant target="clean" buildpath="${modules.sorted};installer.new" inheritrefs="false" inheritall="false"/>
        <delete dir="${dist.dir}"/>
        <delete failonerror="false" includeemptydirs="true">
            <fileset dir="build">
                <exclude name="testuserdir/"/>
            </fileset>
        </delete>
    </target>
    
    <target name="build-installers" depends="nbms">
        <ant dir="installer.new"/>
    </target>

</project>
